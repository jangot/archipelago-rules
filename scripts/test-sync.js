#!/usr/bin/env node

const RulesSync = require('./sync-rules');

// –¢–µ—Å—Ç–æ–≤—ã–π HTML –∫–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
const testHTML = `
<html>
<body>
    <h1>–ü—Ä–µ–¥–∏—Å–ª–æ–≤–∏–µ</h1>
    <p>–ê—Ä—Ö–∏–ø–µ–ª–∞–≥ - —ç—Ç–æ —Å–µ—Ç—Ç–∏–Ω–≥ –¥–ª—è –ù–†–ò, –∫–æ—Ç–æ—Ä—ã–π —è —Å–æ–∑–¥–∞–ª, –∫–æ–≥–¥–∞ –±—ã–ª –≤ –ø–æ–∏—Å–∫–∞—Ö —Ç–æ–≥–æ, —á—Ç–æ –º–Ω–µ —Ö–æ—Ç–µ–ª–æ—Å—å –±—ã –ø–æ–≤–æ–¥–∏—Ç—å.</p>
    <p>–≠—Ç–æ —Å–µ—Ç—Ç–∏–Ω–≥, –≤ –∫–æ—Ç–æ—Ä–æ–º –Ω–∞–π–¥—ë—Ç—Å—è –º–µ—Å—Ç–æ —Å–∞–º—ã–º —Ä–∞–∑–Ω—ã–º —Å—é–∂–µ—Ç–∞–º, –≥–µ—Ä–æ—è–º –∏ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏—è–º.</p>

    <h1>–°–æ–∑–¥–∞–Ω–∏–µ –ü–µ—Ä—Å–æ–Ω–∞–∂–∞</h1>
    <p>–£ –∫–∞–∂–¥–æ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –µ—Å—Ç—å –ê—Ç—Ä–∏–±—É—Ç—ã, –ù–∞–≤—ã–∫–∏, –¢–∞–ª–∞–Ω—Ç—ã, –∏ –∫–∞–∫–æ–µ-—Ç–æ —Å—Ç–∞—Ä—Ç–æ–≤–æ–µ —Å–Ω–∞—Ä—è–∂–µ–Ω–∏–µ.</p>
    <p>–ü–µ—Ä—Å–æ–Ω–∞–∂–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –≤ –ø—è—Ç—å —ç—Ç–∞–ø–æ–≤.</p>

    <h1>–®–∞–≥ –ü–µ—Ä–≤—ã–π: –ü—Ä–∏—Ä–æ–¥–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞</h1>
    <p>–ü—Ä–∏—Ä–æ–¥–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ - —ç—Ç–æ —Å—É—Ç—å –µ–≥–æ –±—ã—Ç–∏—è –≤ –º–∏—Ä–µ –ê—Ä—Ö–∏–ø–µ–ª–∞–≥–∞.</p>
    <p>–ü–µ—Ä—Å–æ–Ω–∞–∂–∏ –º–æ–≥—É—Ç –±—ã—Ç—å: –°–º–µ—Ä—Ç–Ω—ã–µ, –ë–µ—Å—Å–º–µ—Ä—Ç–Ω—ã–µ, –ö–æ—à–∫–∏.</p>

    <h1>–¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–π –ë–æ–µ—Ü</h1>
    <p>–ù–µ–≤–∞–∂–Ω–æ, –ø–æ –∫–∞–∫–æ–π –ø—Ä–∏—á–∏–Ω–µ, –±—É–¥—å —Ç–æ –≤–∞—à–µ –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏–µ –∏–∑ –æ—Ç–¥–∞–ª—ë–Ω–Ω—ã—Ö –∏ –¥–∏–∫–∏—Ö —É–≥–æ–ª–∫–æ–≤ –ê—Ä—Ö–∏–ø–µ–ª–∞–≥–∞, –∏–ª–∏ –ø—Ä–∏–Ω—Ü–∏–ø–∏–∞–ª—å–Ω–∞—è –≤–µ—Ä–Ω–æ—Å—Ç—å —Ç—Ä–∞–¥–∏—Ü–∏–∏.</p>
    <p>–í—ã —Å—Ä–∞–∂–∞–µ—Ç–µ—Å—å –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–º –æ—Ä—É–∂–∏–µ–º –±–ª–∏–∂–Ω–µ–≥–æ –±–æ—è, –º–∞—Å—Ç–µ—Ä —Å—Ç—Ä–µ–ª—å–±—ã –∏–∑ –ª—É–∫–∞.</p>
</body>
</html>
`;

async function testSync() {
    console.log('üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø—Ä–∞–≤–∏–ª...');

    try {
        const sync = new RulesSync();
        await sync.syncRules(testHTML);

        console.log('‚úÖ –¢–µ—Å—Ç –∑–∞–≤–µ—Ä—à–µ–Ω —É—Å–ø–µ—à–Ω–æ!');
        console.log('üìù –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª—ã –≤ –ø–∞–ø–∫–µ files/parts/');
    } catch (error) {
        console.error('‚ùå –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∞:', error);
    }
}

// –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–∞
if (require.main === module) {
    testSync();
}

module.exports = { testSync };